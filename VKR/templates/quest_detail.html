{% extends "base.html" %}

{% block title %}–ö–≤–µ—Å—Ç - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è —Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∏{% endblock %}

{% block content %}
<div class="quest-detail-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–≤–µ—Å—Ç–∞ -->
    <div class="card">
        <div class="quest-header">
            <div class="quest-icon-large" style="background: #4CAF50;">
                üñ®Ô∏è
            </div>
            <div class="quest-title-info">
                <h1>–û—Å–Ω–æ–≤—ã 3D-–ø–µ—á–∞—Ç–∏</h1>
                <p class="quest-description">–ò–∑—É—á–∏—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã 3D-–ø—Ä–∏–Ω—Ç–µ—Ä–∞ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –º–æ–¥–µ–ª—å</p>
                <div class="quest-meta">
                    <span class="quest-difficulty difficulty-beginner">
                        –ù–∞—á–∞–ª—å–Ω—ã–π
                    </span>
                    <span class="quest-reward">
                        <i class="fas fa-star"></i> 100 –æ–ø—ã—Ç–∞
                    </span>
                </div>
            </div>
        </div>
        
        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–≤–µ—Å—Ç–∞ -->
        <div class="quest-progress">
            <div class="progress-info">
                <span>–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 75%</span>
                <span>3/4 –∑–∞–¥–∞–Ω–∏–π</span>
            </div>
            <div class="progress-bar-large">
                <div class="progress-fill" style="width: 75%"></div>
            </div>
        </div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π -->
    <div class="tasks-section">
        <h2>–ó–∞–¥–∞–Ω–∏—è –∫–≤–µ—Å—Ç–∞</h2>
        <div class="tasks-list">
            <!-- –ó–∞–¥–∞–Ω–∏–µ 1 -->
            <div class="task-item completed">
                <div class="task-checkbox">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="task-content">
                    <h3>–û—Å–Ω–æ–≤—ã 3D-–ø–µ—á–∞—Ç–∏</h3>
                    <p>–ò–∑—É—á–∏—Ç–µ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ FDM –ø–µ—á–∞—Ç–∏ –∏ –≤–∏–¥—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</p>
                    <div class="task-meta">
                        <span class="task-type type-reading">
                            <i class="fas fa-book"></i> –ß—Ç–µ–Ω–∏–µ
                        </span>
                        <span class="task-duration">
                            <i class="fas fa-clock"></i> 20 –º–∏–Ω
                        </span>
                    </div>
                </div>
                <div class="task-actions">
                    <a href="/quest/1/task/1" class="btn btn-secondary btn-small">
                        <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å
                    </a>
                </div>
            </div>

            <!-- –ó–∞–¥–∞–Ω–∏–µ 2 -->
            <div class="task-item completed">
                <div class="task-checkbox">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="task-content">
                    <h3>–¢–µ—Å—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
                    <p>–ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç –ø–æ —Ç–µ—Ö–Ω–∏–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å 3D-–ø—Ä–∏–Ω—Ç–µ—Ä–∞–º–∏</p>
                    <div class="task-meta">
                        <span class="task-type type-quiz">
                            <i class="fas fa-question"></i> –¢–µ—Å—Ç
                        </span>
                        <span class="task-duration">
                            <i class="fas fa-clock"></i> 10 –º–∏–Ω
                        </span>
                    </div>
                </div>
                <div class="task-actions">
                    <a href="/quest/1/task/2" class="btn btn-secondary btn-small">
                        <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å
                    </a>
                </div>
            </div>

            <!-- –ó–∞–¥–∞–Ω–∏–µ 3 -->
            <div class="task-item completed">
                <div class="task-checkbox">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="task-content">
                    <h3>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–æ–¥–µ–ª–∏</h3>
                    <p>–ù–∞—É—á–∏—Ç–µ—Å—å –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—Ç—å 3D-–º–æ–¥–µ–ª–∏ –¥–ª—è –ø–µ—á–∞—Ç–∏ –≤ —Å–ª–∞–π—Å–µ—Ä–µ</p>
                    <div class="task-meta">
                        <span class="task-type type-reading">
                            <i class="fas fa-book"></i> –ß—Ç–µ–Ω–∏–µ
                        </span>
                        <span class="task-duration">
                            <i class="fas fa-clock"></i> 25 –º–∏–Ω
                        </span>
                    </div>
                </div>
                <div class="task-actions">
                    <a href="/quest/1/task/3" class="btn btn-secondary btn-small">
                        <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å
                    </a>
                </div>
            </div>

            <!-- –ó–∞–¥–∞–Ω–∏–µ 4 -->
            <div class="task-item">
                <div class="task-checkbox">
                    <i class="far fa-circle"></i>
                </div>
                <div class="task-content">
                    <h3>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h3>
                    <p>–°–æ–∑–¥–∞–π—Ç–µ –∏ —Ä–∞—Å–ø–µ—á–∞—Ç–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é 3D-–º–æ–¥–µ–ª—å –ø–æ–¥ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞</p>
                    <div class="task-meta">
                        <span class="task-type type-practical">
                            <i class="fas fa-wrench"></i> –ü—Ä–∞–∫—Ç–∏–∫–∞
                        </span>
                        <span class="task-duration">
                            <i class="fas fa-clock"></i> 45 –º–∏–Ω
                        </span>
                    </div>
                </div>
                <div class="task-actions">
                    <a href="/quest/1/task/4" class="btn btn-primary btn-small">
                        –ù–∞—á–∞—Ç—å –ø—Ä–∞–∫—Ç–∏–∫—É
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="quest-navigation">
        <a href="/quests" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ –∫–≤–µ—Å—Ç–∞–º
        </a>
        <button class="btn btn-success" onclick="showCompletionMessage()">
            <i class="fas fa-gift"></i> –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É
        </button>
    </div>
</div>

<style>
/* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–∫–∏–º–∏ –∂–µ –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –∫–æ–¥–µ */
.quest-detail-container {
    max-width: 800px;
    margin: 0 auto;
}

.quest-header {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 1.5rem;
    align-items: start;
    margin-bottom: 2rem;
}

.quest-icon-large {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
}

.quest-title-info h1 {
    margin: 0 0 0.5rem 0;
    color: #333;
}

.quest-description {
    color: #666;
    font-size: 1.1rem;
    margin-bottom: 1rem;
}

.quest-meta {
    display: flex;
    gap: 1rem;
}

.quest-difficulty {
    padding: 0.25rem 0.75rem;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
}

.difficulty-beginner {
    background: #E8F5E9;
    color: #2E7D32;
}

.difficulty-intermediate {
    background: #E3F2FD;
    color: #1565C0;
}

.difficulty-advanced {
    background: #FFEBEE;
    color: #C62828;
}

.quest-reward {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #FFD700;
    font-weight: 600;
}

.quest-progress {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 8px;
}

.progress-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
    font-weight: 600;
}

.progress-bar-large {
    height: 12px;
    background: #e9ecef;
    border-radius: 6px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 6px;
    transition: width 0.3s ease;
}

.tasks-section h2 {
    margin: 2rem 0 1rem 0;
    color: #333;
}

.tasks-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.task-item {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 1rem;
    padding: 1.5rem;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    align-items: center;
}

.task-item.completed {
    background: #f8fff8;
    border-left: 4px solid #4CAF50;
}

.task-checkbox {
    font-size: 1.5rem;
}

.task-item.completed .task-checkbox {
    color: #4CAF50;
}

.task-content h3 {
    margin: 0 0 0.5rem 0;
    color: #333;
}

.task-content p {
    margin: 0 0 0.5rem 0;
    color: #666;
}

.task-meta {
    display: flex;
    gap: 1rem;
    font-size: 0.9rem;
}

.task-type {
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    background: #f0f0f0;
}

.type-video { background: #FFEBEE; color: #C62828; }
.type-quiz { background: #E3F2FD; color: #1565C0; }
.type-reading { background: #E8F5E9; color: #2E7D32; }
.type-practical { background: #FFF3E0; color: #EF6C00; }

.task-duration {
    color: #666;
}

.task-completed {
    color: #4CAF50;
    font-weight: 600;
}

.quest-navigation {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid #e0e0e0;
}

.btn-small {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background: #5a6268;
}
</style>

<script>
function showCompletionMessage() {
    const progress = parseInt(document.querySelector('.progress-fill').style.width);
    if (progress === 100) {
        alert('üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∫–≤–µ—Å—Ç "–û—Å–Ω–æ–≤—ã 3D-–ø–µ—á–∞—Ç–∏" –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ 100 –æ–ø—ã—Ç–∞!');
        setTimeout(() => {
            window.location.href = '/quests';
        }, 2000);
    } else {
        alert('–ó–∞–≤–µ—Ä—à–∏—Ç–µ –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è –∫–≤–µ—Å—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥—ã!');
    }
}
</script>
{% endblock %}