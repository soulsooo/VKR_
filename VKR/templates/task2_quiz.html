{% extends "base.html" %}

{% block title %}–¢–µ—Å—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ - –ó–∞–¥–∞–Ω–∏–µ 2{% endblock %}

{% block content %}
<div class="task-container">
    <div class="task-header">
        <a href="/quest/1" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ –∫–≤–µ—Å—Ç—É
        </a>
        <h1>–¢–µ—Å—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h1>
        <span class="task-type-badge type-quiz">
            <i class="fas fa-question"></i> –¢–µ—Å—Ç
        </span>
    </div>

    <div class="card task-content">
        <h2>–¢–µ—Ö–Ω–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å 3D-–ø—Ä–∏–Ω—Ç–µ—Ä–∞–º–∏</h2>
        
        <div class="quiz-info">
            <p><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong> –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã. –î–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã.</p>
        </div>

        <form id="safetyQuiz" class="quiz-form">
            <!-- –í–æ–ø—Ä–æ—Å 1 -->
            <div class="quiz-question">
                <h3>1. –ß—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —Å 3D-–ø—Ä–∏–Ω—Ç–µ—Ä–æ–º?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="checkbox" name="q1" value="a">
                        <span>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–ª–∞—Å—Ç–∏–∫–∞ –≤ —ç–∫—Å—Ç—Ä—É–¥–µ—Ä–µ</span>
                    </label>
                    <label class="quiz-option">
                        <input type="checkbox" name="q1" value="b">
                        <span>–£–±–µ–¥–∏—Ç—å—Å—è –≤ —á–∏—Å—Ç–æ—Ç–µ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã</span>
                    </label>
                    <label class="quiz-option">
                        <input type="checkbox" name="q1" value="c">
                        <span>–ù–∞–¥–µ—Ç—å –∑–∞—â–∏—Ç–Ω—ã–µ –æ—á–∫–∏</span>
                    </label>
                    <label class="quiz-option">
                        <input type="checkbox" name="q1" value="d">
                        <span>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–∫—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</span>
                    </label>
                </div>
            </div>

            <!-- –í–æ–ø—Ä–æ—Å 2 -->
            <div class="quiz-question">
                <h3>2. –ö–∞–∫–∏–µ –º–µ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –ø—Ä–∏ –ø–µ—á–∞—Ç–∏ ABS –ø–ª–∞—Å—Ç–∏–∫–æ–º?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q2" value="a">
                        <span>–†–∞–±–æ—Ç–∞—Ç—å –≤ —Ö–æ—Ä–æ—à–æ –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–µ–º–æ–º –ø–æ–º–µ—â–µ–Ω–∏–∏</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q2" value="b">
                        <span>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—Ç—è–∂–∫—É –∏–ª–∏ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—é</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q2" value="c">
                        <span>–ù–µ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä—è–¥–æ–º —Å –ø—Ä–∏–Ω—Ç–µ—Ä–æ–º</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q2" value="d">
                        <span>–í—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–µ</span>
                    </label>
                </div>
            </div>

            <!-- –í–æ–ø—Ä–æ—Å 3 -->
            <div class="quiz-question">
                <h3>3. –ß—Ç–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –¥–µ–ª–∞—Ç—å –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã 3D-–ø—Ä–∏–Ω—Ç–µ—Ä–∞?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="checkbox" name="q3" value="a">
                        <span>–î–æ—Ç—Ä–∞–≥–∏–≤–∞—Ç—å—Å—è –¥–æ –Ω–∞–≥—Ä–µ—Ç—ã—Ö —á–∞—Å—Ç–µ–π</span>
                    </label>
                    <label class="quiz-option">
                        <input type="checkbox" name="q3" value="b">
                        <span>–†–µ–∑–∫–æ –≤—ã–¥–µ—Ä–≥–∏–≤–∞—Ç—å —Ñ–∏–ª–∞–º–µ–Ω—Ç</span>
                    </label>
                    <label class="quiz-option">
                        <input type="checkbox" name="q3" value="c">
                        <span>–û—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–∏–Ω—Ç–µ—Ä –±–µ–∑ –ø—Ä–∏—Å–º–æ—Ç—Ä–∞ –Ω–∞ –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è</span>
                    </label>
                    <label class="quiz-option">
                        <input type="checkbox" name="q3" value="d">
                        <span>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</span>
                    </label>
                </div>
            </div>

            <!-- –í–æ–ø—Ä–æ—Å 4 -->
            <div class="quiz-question">
                <h3>4. –ü—Ä–∏ –∫–∞–∫–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –Ω–∞–≥—Ä–µ–≤–∞–µ—Ç—Å—è —ç–∫—Å—Ç—Ä—É–¥–µ—Ä –ø—Ä–∏ –ø–µ—á–∞—Ç–∏ PLA?</h3>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q4" value="a">
                        <span>180-220¬∞C</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q4" value="b">
                        <span>100-150¬∞C</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q4" value="c">
                        <span>250-300¬∞C</span>
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q4" value="d">
                        <span>150-180¬∞C</span>
                    </label>
                </div>
            </div>
        </form>

        <div class="task-actions">
            <button class="btn btn-primary" onclick="checkQuiz()">
                <i class="fas fa-paper-plane"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã
            </button>
        </div>
    </div>
</div>

<style>
.task-container {
    max-width: 800px;
    margin: 0 auto;
}

.task-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.task-header h1 {
    margin: 0;
    color: #333;
}

.task-type-badge {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-weight: 600;
}

.type-quiz {
    background: #E3F2FD;
    color: #1565C0;
}

.quiz-info {
    background: #e3f2fd;
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 2rem;
    border-left: 4px solid #2196F3;
}

.quiz-question {
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: #f8f9fa;
    border-radius: 8px;
}

.quiz-question h3 {
    margin: 0 0 1rem 0;
    color: #333;
}

.quiz-options {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.quiz-option {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    background: white;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.quiz-option:hover {
    background: #e9ecef;
}

.quiz-option input[type="radio"],
.quiz-option input[type="checkbox"] {
    margin: 0;
}

.task-actions {
    text-align: center;
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid #e0e0e0;
}
</style>

<script>
function checkQuiz() {
    // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
    const correctAnswers = {
        q1: ['a', 'b', 'c', 'd'], // –í—Å–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
        q2: ['d'], // –í—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–µ
        q3: ['a', 'b', 'c', 'd'], // –í—Å–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
        q4: ['a'] // 180-220¬∞C
    };

    let score = 0;
    const totalQuestions = 4;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ 1 (multiple choice)
    const q1Answers = Array.from(document.querySelectorAll('input[name="q1"]:checked'))
        .map(input => input.value);
    if (arraysEqual(q1Answers, correctAnswers.q1)) score++;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ 2 (single choice)
    const q2Answer = document.querySelector('input[name="q2"]:checked');
    if (q2Answer && correctAnswers.q2.includes(q2Answer.value)) score++;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ 3 (multiple choice)
    const q3Answers = Array.from(document.querySelectorAll('input[name="q3"]:checked'))
        .map(input => input.value);
    if (arraysEqual(q3Answers, correctAnswers.q3)) score++;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ 4 (single choice)
    const q4Answer = document.querySelector('input[name="q4"]:checked');
    if (q4Answer && correctAnswers.q4.includes(q4Answer.value)) score++;

    if (score === totalQuestions) {
        alert('üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏ —Ç–µ—Å—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!');
        if (confirm('–û—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–µ?')) {
            window.location.href = '/quest/1';
        }
    } else {
        alert(`–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ ${score} –∏–∑ ${totalQuestions} –≤–æ–ø—Ä–æ—Å–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!`);
    }
}

function arraysEqual(a, b) {
    if (a.length !== b.length) return false;
    return a.every(value => b.includes(value));
}
</script>
{% endblock %}